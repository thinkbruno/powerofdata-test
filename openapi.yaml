openapi: 3.0.3
info:
  title: API POD – SWAPI Proxy
  description: |
    API REST que atua como proxy da SWAPI (Star Wars API),
    adicionando filtros, ordenação e paginação.

    Arquitetura típica:
    Client → Apigee → Cloud Run / Cloud Functions → SWAPI
  version: "1.0.0"
  contact:
    name: Bruno Ramos
    email: brunoramos90@gmail.com

servers:
  - url: https://api-pod.example.com
    description: Produção (via Apigee)
  - url: http://localhost:8080
    description: Ambiente local

paths:
  /:
    get:
      summary: Consulta recursos da SWAPI
      description: |
        Retorna dados da SWAPI com suporte a:
        - Filtro por nome ou título
        - Ordenação
        - Paginação
      parameters:
        - name: resource
          in: query
          required: true
          description: Recurso da SWAPI
          schema:
            type: string
            enum: [people, films, planets, starships]

        - name: name
          in: query
          required: false
          description: Filtra por nome ou título
          schema:
            type: string

        - name: sort
          in: query
          required: false
          description: |
            Campo para ordenação.
            Use `-campo` para ordem decrescente.
            Ex: `name` ou `-name`
          schema:
            type: string

        - name: page
          in: query
          required: false
          description: Página (início em 1)
          schema:
            type: integer
            minimum: 1
            default: 1

        - name: page_size
          in: query
          required: false
          description: Quantidade de itens por página
          schema:
            type: integer
            minimum: 1
            maximum: 50
            default: 10

      responses:
        "200":
          description: Resposta com dados paginados
          content:
            application/json:
              schema:
                type: object
                properties:
                  resource:
                    type: string
                    example: people
                  count:
                    type: integer
                    example: 1
                  results:
                    type: array
                    items:
                      type: object
                      additionalProperties: true

        "400":
          description: Erro de validação
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Parameter 'resource' is required

        "500":
          description: Erro interno
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Internal server error

tags:
  - name: SWAPI
    description: Proxy da Star Wars API
